<!DOCTYPE html>
<html>
	<head>
		<title>Nightlife Coordinator</title>
		<script src="/public/js/jquery.min.js"></script>
	    <link href="/public/css/bootstrap.min.css" rel="stylesheet">
	    <script src="/public/js/bootstrap.min.js"></script>
		<link href="/public/css/main.css" rel="stylesheet" type="text/css">
	</head>
	<body>
		<div class="container-fluid nopadding"> 
		  <nav class="navbar navbar-inverse navbar-fixed-top topnav" role="navigation">
		    <div class="navbar-header">
		      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#toggle-nav" aria-expanded="false">
		        <span class="sr-only">Toggle navigation</span>
		        <span class="icon-bar"></span>
		        <span class="icon-bar"></span>
		        <span class="icon-bar"></span>
		      </button>
		      <a class="navbar-brand" href="https://nightlife-coordinator-rfprod.c9users.io"><span class="glyphicon glyphicon-eye-open"></span><span class="glyphicon glyphicon-eye-open"></span> Nightlife Coordinator</a> <a class="navbar-brand" href="https://github.com/rfprod/nightlife-coordinator" target="_blank">GitHub Repo</a>
		    </div>
		    <div class="collapse navbar-collapse" id="toggle-nav">
		      <div class="container-fluid"> 
		        <ul class="nav navbar-nav navbar-right">
		        	<li class="nav-pills"><a href="/"><span class="glyphicon glyphicon-search"></span> Find Venues</a></li>
		        	<li class="nav-pills active"><a href="#app"><span class="glyphicon glyphicon-user"></span> Login With Github</a></li>
		        </ul>
		      </div>
		    </div>
		  </nav>
		  <a name="app"></a>
		  <div class="home sect">
		    <div class="container-fluid">
		      <div class="col-md-12">
		        <p class="output"> 
		          	<div class="login">
						<br />
						<p class="clementine-text"> <span class="glyphicon glyphicon-eye-open"></span><span class="glyphicon glyphicon-eye-open"></span><br/>Nightlife Coordinator</p>
						<a href="/auth/github">
							<div class="custom-btn" id="login-btn">
								<img src="/public/img/github_32px.png" alt="github logo" />
								<p>LOGIN WITH GITHUB</p>
							</div>
						</a>
					</div>
		        </p>
		        <!--<span class="credits">credits</span>-->
		      </div>
		    </div>
		    <div class="credits">
		  		<a href="https://developer.foursquare.com/overview/attribution?ref=EAORGOU4PZLVFOATMAHSHDOXQAEVIA54WNUZGHAJWW0H12FE" target=_blank>Application uses Foursquare API</a>
		  	</div>
		  </div>
		</div>
		<script>
			$(document).ready(function(){
				var url = window.location.href;
				if (url.indexOf('?') != -1) {
					var params = url.substring(url.indexOf('?'),url.length);
					console.log('contains params: '+params);
					if(typeof(Storage) !== "undefined") {
						console.log('local storage available, saving params');
						var location = getPrm(url, 'location');
						var venueId = getPrm(url, 'venueId');
						localStorage.setItem('location',location);
						localStorage.setItem('venueId',venueId);
						console.log('localStorage.location retrieved: '+localStorage.location+" | "+"localStorage.venueId retrieved: "+localStorage.venueId);
					} else console.log('local storage not available');
				} else console.log('does not contain params');
				
				function getPrm(url, prm) {
				    // prm must not contain any regex characters
				    var pattern = new RegExp("[?&]" + prm + "=([^&]+)(&|$)");
				    var match = url.match(pattern);
				    return(match ? match[1] : "");
				}
			});
		</script>
	</body>
</html>